# プロジェクトブリーフィング: Lab (仮称)

## 1. プロジェクトの核心 (Core Concept)

本プロジェクトは、謎に満ちた研究施設「Lab」を舞台とした、テキストベースのインタラクティブなゲーム体験の創出を目指す。プレイヤーは「Lab」の世界観を共有し、研究者、被験体、スラム住民などの役割を担い、相互作用（協力、対立、情報交換など）を通じて物語を紡ぎ出す。

**キーとなる体験:**
-   **没入型の世界観探索:** 断片的な情報（ログ、アイテム、NPCとの会話など）から「Lab」の謎や全体像を解き明かしていく。
-   **プレイヤー主導の物語生成:** プレイヤー間の相互作用や、システム（特に死に様システム、イベントシステム）とのインタラクションにより、予期せぬ展開や個別の物語が生まれる。
-   **過酷な環境でのロールプレイ:** 限られたリソース、厳格な管理体制、危険な現象の中で、自身の役割に応じた判断と行動が求められる。

## 2. 主要なゲームシステムと役割

-   **キャラクターシステム (`CharacterManager`, `CharacterData`):**
    -   プレイヤーおよびNPCの能力値、特性、所属、権限レベルなどを管理。
    -   1d100ベースの判定システムと連携し、行動の成否を決定。
-   **アイテムシステム (`docs/DataStructures/items.csv`, `ItemDefinition`):**
    -   多様な効果、特性、背景を持つアイテムを定義・管理。
    -   「エゴアイテム（遺品）」システムにより、ユニークなランダム性能を持つアイテムを生成。
-   **イベントシステム (`EventManager`):**
    -   ゲーム内で発生する様々な出来事を管理・処理。
    -   プレイヤーの行動や世界の状況に応じてイベントが分岐・連鎖。
-   **死に様システム (`DeathSystem`, `digital_morgue.md`):**
    -   キャラクターの死亡時に詳細な「死亡事象ログ」を自動生成。
    -   ログには状況、原因、そしてLLMによる「最終思考（推定）」テキストが含まれる。
    -   「デジタルモルグ」を通じて、権限に基づき過去の死亡ログを閲覧可能。
-   **文書システム (`docs/DataStructures/document_data.md`想定):**
    -   ゲーム内の多様な文書（報告書、監視記録、私的メモなど）を管理・表示。
    -   LLMと連携し、動的な文書内容（死亡ログの最終思考など）を生成。
    -   情報収集と世界観理解の主要な手段。
-   **相互作用システム:**
    -   プレイヤー間のコミュニケーション、アイテムや情報の交換機能を提供。
    -   一時的な協力/敵対関係を管理。
-   **データベースシステム (`GameDatabase`):**
    -   アイテムマスターデータ（CSV）、キャラクターデータ、セッションデータ、ログデータなどを管理。

## 3. データ管理の概要

-   **アイテムマスターデータ:** `docs/development/data_structures/item_data.md` (旧`docs/DataStructures/items.csv`および`items.md`) にて定義。CSVローダー経由でロード。
-   **キャラクターデータ:** `docs/development/data_structures/character_data.md` で定義。ゲーム進行中に生成・更新され、セーブデータとして永続化。
-   **死亡事象ログ:** `DeathSystem` が収集・生成し、データベースに保存。[技術概要](../development/tech_overview.md#5-デジタルモルグ電子墓地-digital-morgue)で閲覧。
-   **文書データ:** `docs/development/data_structures/document_data.md` で定義。事前定義文書と動的生成文書があり、文書システムが管理。
-   **セーブデータ:** `SaveData` クラスで定義され、ゲームの進行状況をJSON形式などで永続化。

## 4. 開発の大きな流れ (主要フェーズ概観 - [開発タスク](./development_tasks.md) 準拠)

1.  **Phase 1: コアシステム実装:** プロジェクト基盤、主要マネージャーの実装。
2.  **Phase 2: キャラクターと基本インタラクション:** キャラクターシステム詳細、主要UI。
3.  **Phase 3: コアゲームプレイシステム:** 死に様システム（基礎）、イベントシステム（基礎）。
4.  **Phase 4: データコンテンツ実装:** アイテムDB、文書データモデル、事前定義文書DB構築。
5.  **Phase 5: 文書システムとLLM連携:** 文書生成・管理、LLMによる死亡ログテキスト生成。
6.  **Phase 6: UI詳細実装とインタラクション:** 文書ビューアー、デジタルモルグUIなど。
7.  **Phase 7: データ永続化:** セーブ・ロード機能。
8.  **Phase 8: 最適化、テスト、調整:** パフォーマンス、UI/UX、バグ修正、バランス調整。

## 5. 最も重要な参照ドキュメント (新体系パス)

-   **タスク管理:** [開発タスク](./development_tasks.md)
-   **要件定義:** [要件定義](./requirements.md)
-   **技術概要:** [技術概要](../development/tech_overview.md)
-   **アイテム仕様:** [アイテムデータ構造](../development/data_structures/item_data.md)
-   **デジタルモルグ仕様:** [技術概要](../development/tech_overview.md#5-デジタルモルグ電子墓地-digital-morgue) (旧`digital_morgue.md`)
-   **世界観設定:** [世界観概要](../design/world/overview.md) (旧`lab世界観設定資料集（改訂版）.md`)

---
このブリーフィングは、AIアシスタントがプロジェクトの全体像と主要な要素を迅速に理解し、より的確なサポートを提供することを目的としています。 